(this["webpackJsonprun-the-world"]=this["webpackJsonprun-the-world"]||[]).push([[0],{34:function(n,e,t){},61:function(n,e,t){"use strict";t.r(e);var r=t(1),c=t(0),a=t.n(c),u=t(4),i=t.n(u),o=(t(34),t(9)),s=t(2),l=t.n(s),d=t(28),p=t(3),b=t(11),j=t(17),f=t(5),h=t(7),x=t(13),v=t.n(x),O=t(6);t(57);function k(){var n=Object(f.a)(["\n  margin-top: 6px;\n  display: flex;\n  justify-content: center;\n\n  button + button {\n    margin-left: 6px;\n  }\n"]);return k=function(){return n},n}function m(){var n=Object(f.a)(["\n  display: flex;\n"]);return m=function(){return n},n}function w(){var n=Object(f.a)(["\n  label {\n    display: block;\n  }\n"]);return w=function(){return n},n}function g(){var n=Object(f.a)(["\n  width: 180px;\n  height: 120px;\n"]);return g=function(){return n},n}function y(){var n=Object(f.a)(["\n  max-width: 960px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return y=function(){return n},n}var T=O.a.div(y()),C=O.a.div(g()),S=O.a.div(w()),I=O.a.div(m()),F=O.a.div(k()),U=function(n){var e=n.id,t=n.user,c=e||t.uid;return Object(r.jsxs)("div",{children:[t&&Object(r.jsxs)("p",{children:["uid: ",c]}),Object(r.jsx)(C,{id:c})]})},L=function(n){var e=n.setSettings,t=function(n){return function(t){return e((function(e){return Object(j.a)(Object(j.a)({},e),{},Object(b.a)({},n,t.target.value))}))}};return Object(r.jsxs)(S,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"appId",children:"appId"}),Object(r.jsx)("input",{id:"appId",type:"text",name:"appId",onChange:t("appId")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"channel",children:"Channel"}),Object(r.jsx)("input",{id:"channel",type:"text",name:"channel",onChange:t("channel")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"token",children:"Token"}),Object(r.jsx)("input",{id:"token",type:"text",name:"token",onChange:t("token")})]})]})},E=function(){var n=Object(c.useState)(),e=Object(o.a)(n,2),t=e[0],a=e[1],u=Object(c.useState)([]),i=Object(o.a)(u,2),s=i[0],b=i[1],j=Object(c.useState)(),f=Object(o.a)(j,2),x=f[0],O=f[1],k=Object(c.useState)({appID:"",channel:"",token:""}),m=Object(o.a)(k,2),w=m[0],g=m[1],y=function(n){var e=n.client,t=n.localUser,r=n.settings,c=n.setLocalUser,a=n.setClient,u=n.setRemoteUsers;return{join:function(){var n=Object(p.a)(l.a.mark((function n(){var e,t,i,o,s,b,j;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(e=v.a.createClient({mode:"rtc",codec:"h264"})).on("user-joined",function(){var n=Object(p.a)(l.a.mark((function n(e){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u((function(n){return n.find((function(n){return n.uid===e.uid}))?n:[].concat(Object(d.a)(n),[e])}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),e.on("user-published",function(){var n=Object(p.a)(l.a.mark((function n(t,r){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h.b.info("user-published: ".concat(t.uid," ").concat(r)),n.next=3,e.subscribe(t,r);case 3:"video"===r?t.videoTrack.play(t.uid.toString()):"audio"===r&&t.audioTrack.play();case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),e.on("user-unpublished",function(){var n=Object(p.a)(l.a.mark((function n(e,t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h.b.warning("user-unpublished: ".concat(e.uid," ").concat(t));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),e.on("user-left",function(){var n=Object(p.a)(l.a.mark((function n(e,t){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u((function(n){return n.filter((function(n){return n.uid!==e.uid}))}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()),n.prev=5,t=r.appId,i=r.channel,o=r.token,n.next=9,e.join(t,i,o);case 9:return s=n.sent,n.next=12,v.a.createMicrophoneAudioTrack();case 12:return b=n.sent,n.next=15,v.a.createCameraVideoTrack();case 15:return(j=n.sent).play("local-user"),c({uid:s,audioTrack:b,videoTrack:j}),n.next=20,e.publish([b,j]);case 20:return h.b.info("join channel success!"),a(e),n.abrupt("return",e);case 25:return n.prev=25,n.t0=n.catch(5),h.b.error(n.t0.message),n.abrupt("return",{});case 29:case"end":return n.stop()}}),n,null,[[5,25]])})));return function(){return n.apply(this,arguments)}}(),leave:function(){var n=Object(p.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.audioTrack.close(),t.videoTrack.close(),a(null),c(null),u([]),n.next=7,e.leave();case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),show:function(){var n=Object(p.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.videoTrack.setEnabled(!0);case 2:return n.abrupt("return",e.publish([t.videoTrack]));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),hide:function(){var n=Object(p.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.videoTrack.setEnabled(!1);case 2:return n.abrupt("return",e.unpublish([t.videoTrack]));case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),mute:function(){var n=Object(p.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.unpublish([t.audioTrack]));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),unmute:function(){var n=Object(p.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e.publish([t.audioTrack]));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}({client:x,localUser:t,settings:w,setLocalUser:a,setClient:O,setRemoteUsers:b}),C=y.join,S=y.leave,E=y.show,J=y.hide,M=y.mute,R=y.unmute;return Object(r.jsxs)(T,{children:[Object(r.jsx)(h.a,{position:"bottom-left"}),Object(r.jsx)("h1",{children:"Run The World"}),Object(r.jsx)(L,{setSettings:g}),Object(r.jsx)(F,{children:x?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:S,children:"Leave"}),Object(r.jsx)("button",{onClick:E,children:"Show"}),Object(r.jsx)("button",{onClick:J,children:"Hide"}),Object(r.jsx)("button",{onClick:M,children:"Mute"}),Object(r.jsx)("button",{onClick:R,children:"Unmute"})]}):Object(r.jsx)("button",{onClick:C,children:"Join"})}),Object(r.jsxs)(I,{children:[Object(r.jsx)(U,{id:"local-user",user:t}),null===s||void 0===s?void 0:s.map((function(n){return Object(r.jsx)(U,{user:n},n.uid)}))]})]})},J=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,64)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,a=e.getLCP,u=e.getTTFB;t(n),r(n),c(n),a(n),u(n)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(E,{})}),document.getElementById("root")),J()}},[[61,1,2]]]);
//# sourceMappingURL=main.35ebb717.chunk.js.map