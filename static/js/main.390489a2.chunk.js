(this["webpackJsonprun-the-world"]=this["webpackJsonprun-the-world"]||[]).push([[0],{34:function(e,n,t){},58:function(e,n,t){},62:function(e,n,t){"use strict";t.r(n);var r=t(1),c=t(0),a=t.n(c),u=t(4),i=t.n(u),o=(t(34),t(9)),s=t(2),l=t.n(s),d=t(28),p=t(3),b=t(11),j=t(17),f=t(7),h=t(5),v=t(13),x=t.n(v),O=t(8);t(57),t(58);function k(){var e=Object(f.a)(["\n  margin-top: 6px;\n  display: flex;\n  justify-content: center;\n\n  button + button {\n    margin-left: 6px;\n  }\n"]);return k=function(){return e},e}function m(){var e=Object(f.a)(["\n  display: flex;\n"]);return m=function(){return e},e}function w(){var e=Object(f.a)(["\n  label {\n    display: block;\n  }\n"]);return w=function(){return e},e}function y(){var e=Object(f.a)(["\n  width: 180px;\n  height: 120px;\n"]);return y=function(){return e},e}var g=O.a.div(y()),T=O.a.div(w()),C=O.a.div(m()),A=O.a.div(k()),I=function(e){var n=e.id,t=e.user,c=n||t.uid;return Object(r.jsxs)("div",{children:[t&&Object(r.jsxs)("p",{children:["uid: ",c]}),Object(r.jsx)(g,{id:c})]})},S=function(e){var n=e.setSettings,t=function(e){return function(t){return n((function(n){return Object(j.a)(Object(j.a)({},n),{},Object(b.a)({},e,t.target.value))}))}};return Object(r.jsxs)(T,{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"appId",children:"appId"}),Object(r.jsx)("input",{id:"appId",type:"text",name:"appId",onChange:t("appId")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"channel",children:"Channel"}),Object(r.jsx)("input",{id:"channel",type:"text",name:"channel",onChange:t("channel")})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{htmlFor:"token",children:"Token"}),Object(r.jsx)("input",{id:"token",type:"text",name:"token",onChange:t("token")})]})]})},F=function(){var e=Object(c.useState)(),n=Object(o.a)(e,2),t=n[0],a=n[1],u=Object(c.useState)([]),i=Object(o.a)(u,2),s=i[0],b=i[1],j=Object(c.useState)(),f=Object(o.a)(j,2),v=f[0],O=f[1],k=Object(c.useState)({appID:"b09b71cce3ea499a80e7e94c9abae12e",channel:"runTheWorld",token:"006ed1ec7534a41423faea1f5a3ccd04399IACT3bNUZDYGuocHIMczy6J7jZR8eqQbw8tbIwQGs2qA/DnmkEUAAAAAEABJgS3VcxeoXwEAAQByF6hf"}),m=Object(o.a)(k,2),w=m[0],y=m[1],g=function(e){var n=e.client,t=e.localUser,r=e.settings,c=e.setLocalUser,a=e.setClient,u=e.setRemoteUsers;return{join:function(){var e=Object(p.a)(l.a.mark((function e(){var n,t,i,o,s,b,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=x.a.createClient({mode:"rtc",codec:"h264"})).on("user-joined",function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((function(e){return e.find((function(e){return e.uid===n.uid}))?e:[].concat(Object(d.a)(e),[n])}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),n.on("user-published",function(){var e=Object(p.a)(l.a.mark((function e(t,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.b.info("user-published: ".concat(t.uid," ").concat(r)),e.next=3,n.subscribe(t,r);case 3:"video"===r?t.videoTrack.play(t.uid.toString()):"audio"===r&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),n.on("user-unpublished",function(){var e=Object(p.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.b.warning("user-unpublished: ".concat(n.uid," ").concat(t));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),n.on("user-left",function(){var e=Object(p.a)(l.a.mark((function e(n,t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u((function(e){return e.filter((function(e){return e.uid!==n.uid}))}));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),e.prev=5,t=r.appId,i=r.channel,o=r.token,e.next=9,n.join(t,i,o);case 9:return s=e.sent,e.next=12,x.a.createMicrophoneAudioTrack();case 12:return b=e.sent,e.next=15,x.a.createCameraVideoTrack();case 15:return(j=e.sent).play("local-user"),c({uid:s,audioTrack:b,videoTrack:j}),e.next=20,n.publish([b,j]);case 20:return h.b.info("join channel success!"),a(n),e.abrupt("return",n);case 25:return e.prev=25,e.t0=e.catch(5),h.b.error(e.t0.message),e.abrupt("return",{});case 29:case"end":return e.stop()}}),e,null,[[5,25]])})));return function(){return e.apply(this,arguments)}}(),leave:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.audioTrack.close(),t.videoTrack.close(),a(null),c(null),u([]),e.next=7,n.leave();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),show:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.videoTrack.setEnabled(!0);case 2:return e.abrupt("return",n.publish([t.videoTrack]));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hide:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.videoTrack.setEnabled(!1);case 2:return e.abrupt("return",n.unpublish([t.videoTrack]));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),mute:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.unpublish([t.audioTrack]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),unmute:function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.publish([t.audioTrack]));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}({client:v,localUser:t,settings:w,setLocalUser:a,setClient:O,setRemoteUsers:b}),T=g.join,F=g.leave,U=g.show,E=g.hide,J=g.mute,L=g.unmute;return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(h.a,{position:"bottom-left"}),Object(r.jsx)("h1",{children:"Run The World"}),Object(r.jsx)(S,{setSettings:y}),Object(r.jsx)(A,{children:v?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("button",{onClick:F,children:"Leave"}),Object(r.jsx)("button",{onClick:U,children:"Show"}),Object(r.jsx)("button",{onClick:E,children:"Hide"}),Object(r.jsx)("button",{onClick:J,children:"Mute"}),Object(r.jsx)("button",{onClick:L,children:"Unmute"})]}):Object(r.jsx)("button",{onClick:T,children:"Join"})}),Object(r.jsxs)(C,{children:[Object(r.jsx)(I,{id:"local-user",user:t}),null===s||void 0===s?void 0:s.map((function(e){return Object(r.jsx)(I,{user:e},e.uid)}))]})]})},U=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,65)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,u=n.getTTFB;t(e),r(e),c(e),a(e),u(e)}))};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(F,{})}),document.getElementById("root")),U()}},[[62,1,2]]]);
//# sourceMappingURL=main.390489a2.chunk.js.map